# 常见问题解答 (FAQ)

## 环境变量相关问题

### 为什么 `.env` 文件不提交到代码仓库？

`.env` 文件通常包含环境特定的配置信息，有些可能包含敏感数据（如 API 密钥、密码等）。为了安全考虑，这些文件不应该提交到代码仓库。我们提供了 `.env.example` 文件作为配置模板，开发者可以复制该文件并根据自己的环境进行配置。

### Vercel 自动化部署时如何获取环境变量？

在 Vercel 部署时，环境变量通过 Vercel 控制台进行配置，而不是通过 `.env` 文件。您可以在 Vercel 项目设置的 "Environment Variables" 选项卡中添加所需的环境变量。

### 为什么代码中仍然使用 `process.env.MICRO_APP_ACTIVE_RULE`？

代码中使用 `process.env.MICRO_APP_ACTIVE_RULE || '/sub-app'` 的模式是为了提供灵活性：

1. 如果设置了环境变量，就使用环境变量的值
2. 如果没有设置，就使用默认值 `/sub-app`

这样设计的好处是：
- 保持了代码的灵活性，允许通过环境变量自定义激活路径
- 避免了硬编码，符合配置管理的最佳实践
- 在大多数情况下可以正常工作，无需额外配置

### Vercel 部署时如何处理 `MICRO_APP_ACTIVE_RULE`？

在 Vercel 部署时，您有两种选择：

**选项1：使用默认值（推荐）**
- 不设置 `MICRO_APP_ACTIVE_RULE` 环境变量
- 代码会自动使用默认值 `/sub-app`

**选项2：自定义激活路径**
- 在 Vercel 项目设置中添加环境变量：
  - Key: `MICRO_APP_ACTIVE_RULE`
  - Value: 您想要的自定义路径（如 `/custom-path`）

## 微前端相关问题

### 子应用如何同时支持独立部署和微前端集成？

子应用通过以下机制实现两种场景的适配：

1. **环境检测**：通过 `qiankunWindow.__POWERED_BY_QIANKUN__` 检测是否运行在微前端环境中
2. **路由适配**：根据运行环境自动切换路由基础路径
3. **配置管理**：通过环境变量管理不同环境的配置

### 如何确保子应用在不同环境中的路径一致性？

通过以下方式确保路径一致性：

1. 在主应用中配置子应用的 `activeRule`
2. 在 Vercel 部署时设置相应的 `BASE_PATH` 环境变量
3. 确保两者使用相同的路径值